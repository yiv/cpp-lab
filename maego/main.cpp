//#include <iostream>
//
//int main() {
//    std::cout << "Hello, World!" << std::endl;
//    return 0;
//}


#include"proto.h"
#include<iostream>
v2_decoder_object_t decoder;
static uint8_t tcp_decoder_buf[2048];
void initData()
{
    decoder.p_data = tcp_decoder_buf;
    decoder.step = 0;
    decoder.max = sizeof(tcp_decoder_buf);
    decoder.idx = 0;
    decoder.len = 0;
    decoder.ver = 0;
}
int main()
{
    initData();
    unsigned char test_byte[] = { 0x64,  0x54,  0x20,  0x1a,  0x4,  0x1,  0x20,  0x0,  0x31,  0x0,  0x0,  0x0,  0x0,  0x0,  0x0,  0x0,  0x38,  0x0,  0x69,  0x6d,  0x70,  0x6f,  0x72,  0x74,  0x20,  0x6d,  0x61,  0x65,  0x67,  0x6f,  0xa,  0x6d,  0x61,  0x65,  0x67,  0x6f,  0x2e,  0x69,  0x6e,  0x69,  0x74,  0x69,  0x61,  0x6c,  0x69,  0x7a,  0x65,  0x28,  0x29,  0xa,  0x6d,  0x61,  0x65,  0x67,  0x6f,  0x2e,  0x70,  0x6c,  0x61,  0x79,  0x56,  0x69,  0x64,  0x65,  0x6f,  0x53,  0x74,  0x72,  0x65,  0x61,  0x6d,  0x28,  0x29,  0x0,  0xe3,  0x75,  0x0,  0x0,  0x0,  0x0,  0x4,  0x0,  0xf0,  0x48 };
    char file_data[] = "import maego\nmaego.initialize()\nmaego.playVideoStream()";
    for (int i = 0; i < 84; i++)
    {
        v2_protocol_process(&decoder, test_byte[i]);
    }
    sendPythonCode((uint8_t*)file_data, 56);
    //system("pause");

    return 0;
}